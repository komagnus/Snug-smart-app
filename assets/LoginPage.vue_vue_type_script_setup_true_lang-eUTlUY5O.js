import{p as M,I as le,a as Ce,m as ae,b as he,e as pe,g as J,u as z,f as te,h as p,i as Se,j as Ie,k as we,t as B,l as Q,n as V,R as xe,s as oe,r as s,q as ce,v as H,w as Ue,x as Be,F as ve,V as Fe,y as De,z as Pe,A as Le,B as Z,C as Ae,D as Ne,E as Te,G as _e,H as me,J as We,K as Ee,L as ue,M as Re,N as $e,O as Ge,d as Me,P as je,Q as qe,S as Ke,o as g,T as K,U as E,W as re,X as Oe,Y as ze,c as x,Z as F,_ as U,$ as O,a0 as ee,a1 as G,a2 as He,a3 as se,a4 as Je,a5 as Qe,a6 as Xe,a7 as Ye,a8 as Ze,a9 as el,aa as ll,ab as al,ac as tl,ad as nl}from"./index-e_Z-6x_B.js";const fe=Symbol.for("vuetify:selection-control-group"),ye=M({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:le,trueIcon:le,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Ce},...ae(),...he(),...pe()},"SelectionControlGroup"),ol=M({...ye({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");J()({name:"VSelectionControlGroup",props:ol(),emits:{"update:modelValue":e=>!0},setup(e,b){let{slots:k}=b;const t=z(e,"modelValue"),l=te(),m=p(()=>e.id||`v-selection-control-group-${l}`),i=p(()=>e.name||m.value),u=new Set;return Se(fe,{modelValue:t,forceUpdate:()=>{u.forEach(o=>o())},onForceUpdate:o=>{u.add(o),Ie(()=>{u.delete(o)})}}),we({[e.defaultsTarget]:{color:B(e,"color"),disabled:B(e,"disabled"),density:B(e,"density"),error:B(e,"error"),inline:B(e,"inline"),modelValue:t,multiple:p(()=>!!e.multiple||e.multiple==null&&Array.isArray(t.value)),name:i,falseIcon:B(e,"falseIcon"),trueIcon:B(e,"trueIcon"),readonly:B(e,"readonly"),ripple:B(e,"ripple"),type:B(e,"type"),valueComparator:B(e,"valueComparator")}}),Q(()=>{var o;return V("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(o=k.default)==null?void 0:o.call(k)])}),{}}});const Ve=M({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...ae(),...ye()},"VSelectionControl");function ul(e){const b=Pe(fe,void 0),{densityClasses:k}=Le(e),t=z(e,"modelValue"),l=p(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),m=p(()=>e.falseValue!==void 0?e.falseValue:!1),i=p(()=>!!e.multiple||e.multiple==null&&Array.isArray(t.value)),u=p({get(){const C=b?b.modelValue.value:t.value;return i.value?Z(C).some(y=>e.valueComparator(y,l.value)):e.valueComparator(C,l.value)},set(C){if(e.readonly)return;const y=C?l.value:m.value;let h=y;i.value&&(h=C?[...Z(t.value),y]:Z(t.value).filter(S=>!e.valueComparator(S,l.value))),b?b.modelValue.value=h:t.value=h}}),{textColorClasses:o,textColorStyles:c}=Ae(p(()=>{if(!(e.error||e.disabled))return u.value?e.color:e.baseColor})),{backgroundColorClasses:f,backgroundColorStyles:d}=Ne(p(()=>u.value&&!e.error&&!e.disabled?e.color:void 0)),v=p(()=>u.value?e.trueIcon:e.falseIcon);return{group:b,densityClasses:k,trueValue:l,falseValue:m,model:u,textColorClasses:o,textColorStyles:c,backgroundColorClasses:f,backgroundColorStyles:d,icon:v}}const ie=J()({name:"VSelectionControl",directives:{Ripple:xe},inheritAttrs:!1,props:Ve(),emits:{"update:modelValue":e=>!0},setup(e,b){let{attrs:k,slots:t}=b;const{group:l,densityClasses:m,icon:i,model:u,textColorClasses:o,textColorStyles:c,backgroundColorClasses:f,backgroundColorStyles:d,trueValue:v}=ul(e),C=te(),y=oe(!1),h=oe(!1),S=s(),I=p(()=>e.id||`input-${C}`),L=p(()=>!e.disabled&&!e.readonly);l==null||l.onForceUpdate(()=>{S.value&&(S.value.checked=u.value)});function D(w){L.value&&(y.value=!0,Te(w.target,":focus-visible")!==!1&&(h.value=!0))}function r(){y.value=!1,h.value=!1}function X(w){L.value&&(e.readonly&&l&&_e(()=>l.forceUpdate()),u.value=w.target.checked)}return Q(()=>{var _,P;const w=t.label?t.label({label:e.label,props:{for:I.value}}):e.label,[R,A]=ce(k),T=V("input",H({ref:S,checked:u.value,disabled:!!e.disabled,id:I.value,onBlur:r,onFocus:D,onInput:X,"aria-disabled":!!e.disabled,type:e.type,value:v.value,name:e.name,"aria-checked":e.type==="checkbox"?u.value:void 0},A),null);return V("div",H({class:["v-selection-control",{"v-selection-control--dirty":u.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":y.value,"v-selection-control--focus-visible":h.value,"v-selection-control--inline":e.inline},m.value,e.class]},R,{style:e.style}),[V("div",{class:["v-selection-control__wrapper",o.value],style:c.value},[(_=t.default)==null?void 0:_.call(t,{backgroundColorClasses:f,backgroundColorStyles:d}),Ue(V("div",{class:["v-selection-control__input"]},[((P=t.input)==null?void 0:P.call(t,{model:u,textColorClasses:o,textColorStyles:c,backgroundColorClasses:f,backgroundColorStyles:d,inputNode:T,icon:i.value,props:{onFocus:D,onBlur:r,id:I.value}}))??V(ve,null,[i.value&&V(Fe,{key:"icon",icon:i.value},null),T])]),[[Be("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),w&&V(De,{for:I.value,clickable:!0,onClick:Y=>Y.stopPropagation()},{default:()=>[w]})])}),{isFocused:y,input:S}}}),be=M({indeterminate:Boolean,indeterminateIcon:{type:le,default:"$checkboxIndeterminate"},...Ve({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),de=J()({name:"VCheckboxBtn",props:be(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,b){let{slots:k}=b;const t=z(e,"indeterminate"),l=z(e,"modelValue");function m(o){t.value&&(t.value=!1)}const i=p(()=>t.value?e.indeterminateIcon:e.falseIcon),u=p(()=>t.value?e.indeterminateIcon:e.trueIcon);return Q(()=>{const o=me(ie.filterProps(e),["modelValue"]);return V(ie,H(o,{modelValue:l.value,"onUpdate:modelValue":[c=>l.value=c,m],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:i.value,trueIcon:u.value,"aria-checked":t.value?"mixed":void 0}),k)}),{}}}),rl=M({...We(),...me(be(),["inline"])},"VCheckbox"),sl=J()({name:"VCheckbox",inheritAttrs:!1,props:rl(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,b){let{attrs:k,slots:t}=b;const l=z(e,"modelValue"),{isFocused:m,focus:i,blur:u}=Ee(e),o=te(),c=p(()=>e.id||`checkbox-${o}`);return Q(()=>{const[f,d]=ce(k),v=ue.filterProps(e),C=de.filterProps(e);return V(ue,H({class:["v-checkbox",e.class]},f,v,{modelValue:l.value,"onUpdate:modelValue":y=>l.value=y,id:c.value,focused:m.value,style:e.style}),{...t,default:y=>{let{id:h,messagesId:S,isDisabled:I,isReadonly:L}=y;return V(de,H(C,{id:h.value,"aria-describedby":S.value,disabled:I.value,readonly:L.value},d,{modelValue:l.value,"onUpdate:modelValue":D=>l.value=D,onFocus:i,onBlur:u}),t)}})}),{}}}),il=M({...ae(),...Re()},"VForm"),dl=J()({name:"VForm",props:il(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,b){let{slots:k,emit:t}=b;const l=$e(e),m=s();function i(o){o.preventDefault(),l.reset()}function u(o){const c=o,f=l.validate();c.then=f.then.bind(f),c.catch=f.catch.bind(f),c.finally=f.finally.bind(f),t("submit",c),c.defaultPrevented||f.then(d=>{var C;let{valid:v}=d;v&&((C=m.value)==null||C.submit())}),c.preventDefault()}return Q(()=>{var o;return V("form",{ref:m,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:i,onSubmit:u},[(o=k.default)==null?void 0:o.call(k,l)])}),Ge(l,m)}}),cl=G("img",{src:He},null,-1),vl={key:9,style:{color:"red"}},ml={key:10,style:{color:"red"}},fl={key:11,style:{color:"red"}},yl=G("br",null,null,-1),Vl={key:12},bl=G("br",null,null,-1),gl=Me({__name:"LoginPage",setup(e){const b=je(),k=qe(),t=Ke(),l=s(""),m=s(""),i=s(""),u=s(""),o=s(""),c=s(""),f=s(!1),d=s(!1),v=s(!1),C=s(!1),y=s(""),h=s(0),S=s(0),I=s(""),L=s(!1),D=s(!1),r=b.User,X=k,w=s(!1),R=s(!1),A=s(""),T=s(""),_=s(""),P=s(0);async function Y(){try{d.value=!0;const a=(await se(l.value)).document;if(a!==null)if(a.username===l.value&&a.userpw===m.value){I.value=a._id;const n=await Je(I.value);c.value=a.name,l.value=a.username,w.value=!0,i.value=n.document.clientid,u.value=n.document.clientsecret,o.value=n.document.serialnumber,h.value=n.document.lat,S.value=n.document.lng;const $=await Qe(I.value);$.document!==null&&(r.WeatherStation.Id=$.document.wlstationid,r.WeatherStation.ApiKey=$.document.wlapikey,r.WeatherStation.ApiSecret=$.document.wlapisecret);const q=await Xe(I.value);q.document!==null&&(P.value=q.document.pricelimit),t.push("/MainContent")}else j.value=!0;else j.value=!0}catch(N){console.log(N)}finally{r.Name=c.value,r.UserName=l.value,r.IsLoggedIn=w.value,r.UserId=I.value,r.ClientID=i.value,r.ClientSecret=u.value,r.SerialNumber=o.value,r.ClientLocation.Lat=h.value,r.ClientLocation.Lng=S.value,X.PriceLimit=P.value,w.value&&t.push("/MainContent"),d.value=!1}}async function ke(){try{if(D.value=!1,d.value=!0,(await se(l.value)).document!==null){D.value=!0;return}else{const a=await Ye(l.value,m.value);if(y.value=a.insertedId,!C.value){const n=await Ze(i.value,u.value),$=await el(o.value,n.access_token),q=await ll($.location.id,n.access_token);h.value=q.lat,S.value=q.lng}A.value!==""&&await al(y.value,A.value,_.value,T.value),await tl(y.value,P.value),w.value=!0,await nl(y.value,i.value,u.value,o.value,h.value,S.value)}}catch(N){console.log(N)}finally{r.Name=c.value,r.UserName=l.value,r.IsLoggedIn=w.value,r.UserId=y.value,r.ClientID=i.value,r.ClientSecret=u.value,r.SerialNumber=o.value,r.ClientLocation.Lat=h.value,r.ClientLocation.Lng=S.value,A.value!==""&&(r.WeatherStation.Id=A.value,r.WeatherStation.ApiKey=T.value,r.WeatherStation.ApiSecret=_.value),X.PriceLimit=P.value,r.IsLoggedIn&&t.push("/MainContent"),d.value=!1}}function ne(){v.value===!0?(j.value=!1,L.value=!1,D.value=!1,v.value=!1):(j.value=!1,L.value=!1,v.value=!0)}async function ge(){v.value?await ke():await Y()}const j=s(!1);function W(N){return!!N||"Field is required"}return(N,a)=>(g(),K(ve,null,[V(re,{style:{display:"flex",height:"20%",width:"100%","justify-content":"center","flex-direction":"row","align-items":"center"}},{default:E(()=>[cl]),_:1}),V(re,{style:{display:"flex",height:"50%",width:"100%","margin-top":"10%","justify-content":"center","flex-direction":"row","align-items":"center"}},{default:E(()=>[V(Oe,{class:"mx-auto px-6 py-8",style:{width:"60%","min-width":"300px","max-width":"600px"}},{default:E(()=>[V(dl,{modelValue:f.value,"onUpdate:modelValue":a[12]||(a[12]=n=>f.value=n),onSubmit:ze(ge,["prevent"])},{default:E(()=>[v.value?(g(),x(F,{key:0,modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=n=>c.value=n),readonly:d.value,rules:[W],class:"mb-2",clearable:"",label:"Name"},null,8,["modelValue","readonly","rules"])):U("",!0),V(F,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=n=>l.value=n),readonly:d.value,rules:[W],class:"mb-2",clearable:"",label:"Email"},null,8,["modelValue","readonly","rules"]),V(F,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=n=>m.value=n),readonly:d.value,rules:[W],clearable:"",type:"password",label:"Password",placeholder:"Enter your password"},null,8,["modelValue","readonly","rules"]),v.value?(g(),x(F,{key:1,modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=n=>i.value=n),readonly:d.value,rules:[W],clearable:"",label:"Client ID",placeholder:"Enter your airthings account ClientID"},null,8,["modelValue","readonly","rules"])):U("",!0),v.value?(g(),x(F,{key:2,modelValue:u.value,"onUpdate:modelValue":a[4]||(a[4]=n=>u.value=n),readonly:d.value,rules:[W],clearable:"",label:"Clientsecret",placeholder:"Enter your airthings account ClientSecret"},null,8,["modelValue","readonly","rules"])):U("",!0),v.value?(g(),x(F,{key:3,modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=n=>o.value=n),readonly:d.value,rules:[W],clearable:"",label:"Serialnumber",placeholder:"Enter your airthings device SerialNumber"},null,8,["modelValue","readonly","rules"])):U("",!0),v.value?(g(),x(F,{key:4,type:"number",modelValue:P.value,"onUpdate:modelValue":a[6]||(a[6]=n=>P.value=n),readonly:d.value,rules:[W],clearable:"",label:"Price limit in NOK Øre",placeholder:"Enter your desired pricelimit for electricity price"},null,8,["modelValue","readonly","rules"])):U("",!0),v.value?(g(),x(ee,{key:5,onClick:a[7]||(a[7]=n=>R.value=!0)},{default:E(()=>[O("Add weatherlink station?")]),_:1})):U("",!0),R.value?(g(),x(F,{key:6,modelValue:A.value,"onUpdate:modelValue":a[8]||(a[8]=n=>A.value=n),placeholder:"Weatherlink station ID"},null,8,["modelValue"])):U("",!0),R.value?(g(),x(F,{key:7,modelValue:T.value,"onUpdate:modelValue":a[9]||(a[9]=n=>T.value=n),placeholder:"Weatherlink api key"},null,8,["modelValue"])):U("",!0),R.value?(g(),x(F,{key:8,modelValue:_.value,"onUpdate:modelValue":a[10]||(a[10]=n=>_.value=n),placeholder:"Weatherlink api secret"},null,8,["modelValue"])):U("",!0),j.value?(g(),K("p",vl,"Incorrect email and/or password")):L.value?(g(),K("p",ml,"Incorrect email and/or password")):D.value?(g(),K("p",fl,[O("A user with this email is already registered "),G("span",{style:{"text-decoration":"underline",cursor:"pointer"},onClick:ne}," Sign in instead")])):U("",!0),yl,v.value?U("",!0):(g(),K("div",Vl,[G("p",null,[O("First time? Sign up and register device "),G("span",{style:{"text-decoration":"underline",cursor:"pointer"},onClick:ne},"here")])])),v.value?(g(),x(sl,{key:13,modelValue:C.value,"onUpdate:modelValue":a[11]||(a[11]=n=>C.value=n),label:"Test User"},null,8,["modelValue"])):U("",!0),bl,v.value?(g(),x(ee,{key:15,disabled:!f.value,loading:d.value,block:"",type:"submit",color:"success",size:"large",variant:"elevated"},{default:E(()=>[O(" Sign Up ")]),_:1},8,["disabled","loading"])):(g(),x(ee,{key:14,disabled:!f.value,loading:d.value,block:"",color:"success",size:"large",type:"submit",variant:"elevated"},{default:E(()=>[O(" Sign In ")]),_:1},8,["disabled","loading"]))]),_:1},8,["modelValue"])]),_:1})]),_:1})],64))}});export{gl as _};
